---
categories: Vue
---

# Vue

组合式(推荐) 和 选项式

**VSCode 插件`live server`**

## 快速入门
```html
<!DOCTYPE html>
<html>
    <head>
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    </head>

    <body>
        <div id="app">
            <!--双括号-->
            <h1>{{hello()}}</h1>
            <p>{{LuckyNumbers[0]}}</p>
            <p>{{employee.name}}</p>
            <p>{{getRandomLuckyNumber()}}</p>
            <p>{{LuckyNumber}}</p>

        </div>
    </body>

    <script>
        //等价于 const createApp=Vue.createApp ,有点类似于+=,-+的语法糖,这里的createApp是个函数
        const {createApp,ref}= Vue;

        createApp({
            //setup是入口函数
            setup(){
                
                //如果一个值需要被改变那么它应该被声明为let.ref将其包装为object,可以被绑定刷新.
                //其实类似于C#的方法形参,return出去也是个副本.所以不加ref哪怕是修改了值,原本的副本也不会改变.
                let LuckyNumber=ref(6);

                const LuckyNumbers=[3,5,7,9];

                //这是对象，有点类似Json,但不是纯文本，是有结构的. employee.name
                const employee={
                    name:"john",
                    age:30,
                }

                function hello(){
                    const message="hello vue!";
                    return message.toUpperCase();
                }

                function getRandomLuckyNumber(){
                    //被ref包装的需要用value来赋值
                    LuckyNumber.value=Math.floor(Math.random()*10+1);
                    return LuckyNumber;
                }
                
                //为什么已经赋值了还是需要返回,因为setup里面的的私有的,返回就是将其暴露出去.所以外面html才能接收.
                return{
                    hello,
                    LuckyNumbers,
                    employee,
                    getRandomLuckyNumber,
                    LuckyNumber,
                };
            },
        })
        //把创建好的 Vue 应用 挂载到 HTML 的某个元素上
        .mount("#app");
    </script>
</html>
```
## 响应式

`const {ref,reactive}=Vue;` 需要提取

ref:包装,使其能够反应，修改值用.value,它监听变量.

reactive:包装**对象或者数组**,使其能够反应,直接修改值,他监听的是内部信息,不能修改引用.

响应式数据被修改则会更新页面. 

## 函数

```js
//setTimeout
function updateLuckyNumber(){
    setTimeout(()=>{
        LuckyNumber.value=77;
    },2000);
    return LuckyNumber//Math.floor(Math.random()*10+1);
}
```

```js
//Math
function getRandomLuckyNumber(){
    //被ref包装的需要用value来赋值
    LuckyNumber.value=Math.floor(Math.random()*10+1);
    return LuckyNumber;
}
```

## 指令

`v-html` 将返回值渲染
```html
<span v-html="hello()"></span>

<script>
    function hello(){
        const message="hello vue!";
        return `<h1><u>${message}</u></h1>`
    }
</script>
```

`v-once` 只渲染一次
```html
<p v-once>{{LuckyNumber}}</p>
```

`v-bind` href属性里面不能使用`{{}}`,`{{}}`只能用在标签里面.
```html
<a v-bind:href="Url">url</a>

<script>
    //别忘了return
    const Url="https://www.baidu.com";
</script>
```

`v-show` 根据条件显示
```html
<p v-show="employee.green">{{employee.name}}:{{employee.age}}</p>

<script>
    //别忘了return
    const employee=reactive({
        name:"john",
        age:30,
        green:true,
    });
</script>
```

`v-for` 遍历数组

>[!Warning]
>如果在循环内部使用`v-once`,那么那几个值都是一样的.

```html
<p v-for="luck in LuckyNumbers">{{luck}}</p>

<!--index是内置索引-->
<!--<p v-for="(luck,index) in LuckyNumbers">{{luck}},{{index}}</p>-->

<!--第一个传出来的是value,因为vue最常用的是直接取值,所以value被设置为第一个-->
<!--<p v-for="(value,key) in employee">{{key}},{{value}}</p>-->
<!--<p v-for="(value) in employee">{{value}}</p>-->

<script>
    //别忘了return
    const LuckyNumbers=[3,5,7,9,11];
</script>
```

**重点`:key`**

```html
<div id="app">
    <!--这里需要:key来标记以哪个值为key.如果不写默认为index-->
    <p v-for="(person,key) in employee" :key="person.name">
        {{key}}.{{person.name}}-{{person.age}}-{{person.green}}
        <input type="text"></input>
    </p>
    <!--这里为演示,放在这里会无限循环-->
    {{Random()}}
</div>

<script>
    //setup

    const employee=reactive([
        {
        name:"john",
        age:30,
        green:false,
        },
        {
        name:"bob",
        age:25,
        green:true,
        },
        {
        name:"jack",
        age:22,
        green:false,
        }
    ]);

    function Random(){
        setTimeout(()=>{employee.sort(()=>Math.random()-0.5)},4000);
    };

    //return
</script>
```
>[!Important]
>这里涉及到diff算法,以key为标识,如果dom变了则修改内容,如果没变则仅仅调换位置.  
>如果不写则为索引,那么第一行的内容变了,那么就认为dom被修改,所以会直接将内容改变,而没有更换位置.input标签也没有变换位置  
>如果以object对象的唯一值为key,那么只要这个object没变.dom就不会改变,diff只会更换其位置,所以input标签跟着变换位置.  
>**`:key`中间不能有空格**